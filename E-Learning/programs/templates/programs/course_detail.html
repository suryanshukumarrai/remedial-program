{% extends 'programs/base.html' %}

{% block title %}{{ object.title }} — Course{% endblock %}

{% block content %}
  <h1>{{ object.title }}</h1>
  <p><strong>Instructor:</strong> {{ object.instructor }}</p>
  <p><strong>Start date:</strong> {{ object.start_date }}</p>
  <p><strong>Duration (weeks):</strong> {{ object.duration_weeks }}</p>
  <div>{{ object.description|linebreaks }}</div>
  <h3 class="mt-3">Participants</h3>
  {% if object.participants.all %}
    <ul>
      {% for p in object.participants.all %}
        <li class="d-flex justify-content-between align-items-center">
          <div>{{ p.name }} {% if p.organization %} — {{ p.organization }}{% endif %}</div>
          <div>
            {% if request.user.is_staff %}
            <form method="post" action="{% url 'programs:remove_participant' object.pk p.pk %}" style="display:inline">
              {% csrf_token %}
              <button class="btn btn-sm btn-outline-danger" type="submit">Remove</button>
            </form>
            {% endif %}
          </div>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No participants yet.</p>
  {% endif %}

  <div class="mt-3">
    <a class="btn btn-link" href="{% url 'programs:course_list' %}">Back to list</a>
  </div>
{% endblock %}
